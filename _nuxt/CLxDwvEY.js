import{r as x,a as L,d as S,o as A,t as d,v as u,x as e,H as K,I as N,J as M,K as $,L as O,M as C,N as T,O as H,y as m,j as I,P as Q,Q as R,R as D,S as G,z as U}from"./Cyk7o6DO.js";const F="52",X=[{name:"Ngân hàng TMCP Công thương Việt Nam",code:"ICB",bin:"970415",short_name:"VietinBank",supported:!0},{name:"Ngân hàng TMCP Ngoại Thương Việt Nam",code:"VCB",bin:"970436",short_name:"Vietcombank",supported:!0},{name:"Ngân hàng TMCP Quân đội",code:"MB",bin:"970422",short_name:"MBBank",supported:!0},{name:"Ngân hàng TMCP Á Châu",code:"ACB",bin:"970416",short_name:"ACB",supported:!0},{name:"Ngân hàng TMCP Việt Nam Thịnh Vượng",code:"VPB",bin:"970432",short_name:"VPBank",supported:!0},{name:"Ngân hàng TMCP Tiên Phong",code:"TPB",bin:"970423",short_name:"TPBank",supported:!0},{name:"Ngân hàng TMCP Hàng Hải",code:"MSB",bin:"970426",short_name:"MSB",supported:!0},{name:"Ngân hàng TMCP Nam Á",code:"NAB",bin:"970428",short_name:"NamABank",supported:!1},{name:"Ngân hàng TMCP Bưu Điện Liên Việt",code:"LPB",bin:"970449",short_name:"LienVietPostBank",supported:!0},{name:"Ngân hàng TMCP Bản Việt",code:"VCCB",bin:"970454",short_name:"VietCapitalBank",supported:!0},{name:"Ngân hàng TMCP Đầu tư và Phát triển Việt Nam",code:"BIDV",bin:"970418",short_name:"BIDV",supported:!0},{name:"Ngân hàng TMCP Sài Gòn Thương Tín",code:"STB",bin:"970403",short_name:"Sacombank",supported:!0},{name:"Ngân hàng TMCP Quốc tế Việt Nam",code:"VIB",bin:"970441",short_name:"VIB",supported:!0},{name:"Ngân hàng TMCP Phát triển Thành phố Hồ Chí Minh",code:"HDB",bin:"970437",short_name:"HDBank",supported:!0},{name:"Ngân hàng TMCP Đông Nam Á",code:"SEAB",bin:"970440",short_name:"SeABank",supported:!0},{name:"Ngân hàng Thương mại TNHH MTV Dầu Khí Toàn Cầu",code:"GPB",bin:"970408",short_name:"GPBank",supported:!1},{name:"Ngân hàng TMCP Đại Chúng Việt Nam",code:"PVCB",bin:"970412",short_name:"PVcomBank",supported:!1},{name:"Ngân hàng TMCP Quốc Dân",code:"NCB",bin:"970419",short_name:"NCB",supported:!1},{name:"Ngân hàng TNHH MTV Shinhan Việt Nam",code:"SHBVN",bin:"970424",short_name:"ShinhanBank",supported:!0},{name:"Ngân hàng TMCP Sài Gòn",code:"SCB",bin:"970429",short_name:"SCB",supported:!1},{name:"Ngân hàng TMCP Xăng dầu Petrolimex",code:"PGB",bin:"970430",short_name:"PGBank",supported:!1},{name:"Ngân hàng Nông nghiệp và Phát triển Nông thôn Việt Nam",code:"VBA",bin:"970405",short_name:"Agribank",supported:!0},{name:"Ngân hàng TMCP Kỹ thương Việt Nam",code:"TCB",bin:"970407",short_name:"Techcombank",supported:!0},{name:"Ngân hàng TMCP Sài Gòn Công Thương",code:"SGICB",bin:"970400",short_name:"SaigonBank",supported:!1},{name:"Ngân hàng TMCP Đông Á",code:"DOB",bin:"970406",short_name:"DongABank",supported:!1},{name:"Ngân hàng TMCP Bắc Á",code:"BAB",bin:"970409",short_name:"BacABank",supported:!0},{name:"Ngân hàng TNHH MTV Standard Chartered Bank Việt Nam",code:"SCVN",bin:"970410",short_name:"StandardChartered",supported:!1},{name:"Ngân hàng Thương mại TNHH MTV Đại Dương",code:"Oceanbank",bin:"970414",short_name:"Oceanbank",supported:!1},{name:"Ngân hàng Liên doanh Việt - Nga",code:"VRB",bin:"970421",short_name:"VRB",supported:!1},{name:"Ngân hàng TMCP An Bình",code:"ABB",bin:"970425",short_name:"ABBANK",supported:!0},{name:"Ngân hàng TMCP Việt Á",code:"VAB",bin:"970427",short_name:"VietABank",supported:!1},{name:"Ngân hàng TMCP Xuất Nhập khẩu Việt Nam",code:"EIB",bin:"970431",short_name:"Eximbank",supported:!0},{name:"Ngân hàng TMCP Việt Nam Thương Tín",code:"VIETBANK",bin:"970433",short_name:"VietBank",supported:!1},{name:"Ngân hàng TNHH Indovina",code:"IVB",bin:"970434",short_name:"IndovinaBank",supported:!1},{name:"Ngân hàng TMCP Bảo Việt",code:"BVB",bin:"970438",short_name:"BaoVietBank",supported:!1},{name:"Ngân hàng TNHH MTV Public Việt Nam",code:"PBVN",bin:"970439",short_name:"PublicBank",supported:!0},{name:"Ngân hàng TMCP Sài Gòn - Hà Nội",code:"SHB",bin:"970443",short_name:"SHB",supported:!1},{name:"Ngân hàng Thương mại TNHH MTV Xây dựng Việt Nam",code:"CBB",bin:"970444",short_name:"CBBank",supported:!1},{name:"Ngân hàng TMCP Phương Đông",code:"OCB",bin:"970448",short_name:"OCB",supported:!0},{name:"Ngân hàng TMCP Kiên Long",code:"KLB",bin:"970452",short_name:"KienLongBank",supported:!0},{name:"Ngân hàng TNHH MTV CIMB Việt Nam",code:"CIMB",bin:"422589",short_name:"CIMB",supported:!1},{name:"Ngân hàng TNHH MTV HSBC (Việt Nam)",code:"HSBC",bin:"458761",short_name:"HSBC",supported:!1},{name:"DBS Bank Ltd - Chi nhánh Thành phố Hồ Chí Minh",code:"DBS",bin:"796500",short_name:"DBSBank",supported:!1},{name:"Ngân hàng Nonghyup - Chi nhánh Hà Nội",code:"NHB HN",bin:"801011",short_name:"Nonghyup",supported:!1},{id:13,name:"Ngân hàng TNHH MTV Hong Leong Việt Nam",code:"HLBVN",bin:"970442",short_name:"HongLeong",supported:!1},{name:"Ngân hàng Công nghiệp Hàn Quốc - Chi nhánh Hà Nội",code:"IBK - HN",bin:"970455",short_name:"IBK Bank",supported:!1},{name:"Ngân hàng Công nghiệp Hàn Quốc - Chi nhánh TP. Hồ Chí Minh",code:"IBK - HCM",bin:"970456",short_name:"IBK Bank",supported:!1},{name:"Ngân hàng TNHH MTV Woori Việt Nam",code:"WVN",bin:"970457",short_name:"Woori",supported:!1},{name:"Ngân hàng United Overseas - Chi nhánh TP. Hồ Chí Minh",code:"UOB",bin:"970458",short_name:"UnitedOverseas",supported:!1},{name:"Ngân hàng Kookmin - Chi nhánh Hà Nội",code:"KBHN",bin:"970462",short_name:"KookminHN",supported:!1},{name:"Ngân hàng Kookmin - Chi nhánh Thành phố Hồ Chí Minh",code:"KBHCM",bin:"970463",short_name:"KookminHCM",supported:!1},{name:"Ngân hàng Hợp tác xã Việt Nam",code:"COOPBANK",bin:"970446",short_name:"COOPBANK",supported:!1}],z={no_banks:F,data:X},W=()=>{const y=x([]),p=x(!1),i=x(null);return{banks:y,loading:p,error:i,fetchBanks:async()=>{p.value=!0,i.value=null;try{y.value=z.data.map(l=>({code:l.code,name:l.name,shortName:l.short_name,bin:l.bin}))}catch(l){i.value=l,console.error("Error loading banks:",l)}finally{p.value=!1}}}},V=()=>L().$supabase.client,J={class:"bg-white rounded-lg shadow p-6 mb-8"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"relative"},ee=["value"],te={key:0,class:"absolute right-2 top-1/2 -translate-y-1/2"},ne={key:0,class:"mt-1 text-sm text-red-600"},se={class:"mt-4 flex justify-end space-x-3"},oe={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700"},ae={class:"overflow-x-auto"},re={class:"min-w-full divide-y divide-gray-200"},ie={class:"bg-white divide-y divide-gray-200"},le={class:"px-6 py-4 whitespace-nowrap"},de={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap text-right"},me=["onClick"],pe=["onClick"],he=S({__name:"UserManagement",setup(y){const p=x([]),i=x(null),c=x({name:"",account_number:"",bank:""}),{banks:l,loading:v,error:g,fetchBanks:h}=W(),o=n=>{const t=l.value.find(a=>a.code===n);return t?t.name:n},_=async()=>{const{data:n,error:t}=await V().from("users").select("*").order("created_at",{ascending:!1});if(t){console.error("Error loading users:",t);return}p.value=n},k=async()=>{try{const n=V();if(i.value){const{error:t}=await n.from("users").update(c.value).eq("id",i.value);if(t)throw t}else{const{error:t}=await n.from("users").insert([c.value]);if(t)throw t}await _(),s()}catch(n){console.error("Error saving user:",n)}},w=n=>{i.value=n.id,c.value={...n}},r=async n=>{if(confirm("Bạn có chắc chắn muốn xóa người dùng này?"))try{const{error:t}=await V().from("users").delete().eq("id",n);if(t)throw t;await _()}catch(t){console.error("Error deleting user:",t)}},s=()=>{i.value=null,c.value={name:"",account_number:"",bank:""}};return A(async()=>{await Promise.all([_(),h()])}),(n,t)=>(u(),d("div",J,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold mb-4"},"Quản lý người dùng",-1)),e("form",{onSubmit:K(k,["prevent"]),class:"mb-6"},[e("div",Y,[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên",-1)),N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value.name=a),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},null,512),[[M,c.value.name]])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số tài khoản",-1)),N(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value.account_number=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},null,512),[[M,c.value.account_number]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ngân hàng",-1)),e("div",Z,[N(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>c.value.bank=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},[t[5]||(t[5]=e("option",{value:""},"Chọn ngân hàng",-1)),(u(!0),d(C,null,T(H(l),a=>(u(),d("option",{key:a.code,value:a.code},m(a.name),9,ee))),128))],512),[[O,c.value.bank]]),H(v)?(u(),d("div",te,t[6]||(t[6]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"},null,-1)]))):$("",!0)]),H(g)?(u(),d("p",ne," Không thể tải danh sách ngân hàng. Vui lòng thử lại sau. ")):$("",!0)])]),e("div",se,[e("button",{type:"button",onClick:s,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Hủy "),e("button",oe,m(i.value?"Cập nhật":"Thêm"),1)])],32),e("div",ae,[e("table",re,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tên"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Số tài khoản"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngân hàng"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])],-1)),e("tbody",ie,[(u(!0),d(C,null,T(p.value,a=>(u(),d("tr",{key:a.id},[e("td",le,m(a.name),1),e("td",de,m(a.account_number),1),e("td",ue,m(a.bank+" - "+o(a.bank)),1),e("td",ce,[e("button",{onClick:B=>w(a),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Sửa ",8,me),e("button",{onClick:B=>r(a.id),class:"text-red-600 hover:text-red-900"}," Xóa ",8,pe)])]))),128))])])])]))}}),j=()=>{const y=x([]),p=x(!1),i=x(null);return{users:y,loading:p,error:i,fetchUsers:async()=>{p.value=!0,i.value=null;try{const{data:l,error:v}=await V().from("users").select("*").order("name");if(v)throw v;y.value=l}catch(l){i.value=l,console.error("Error loading users:",l)}finally{p.value=!1}}}},ge={class:"bg-white rounded-lg shadow p-6"},be={class:"text-2xl font-bold mb-4"},fe={class:"space-y-4"},xe=["max"],ye=["value"],ve={class:"mt-2 space-y-2"},_e=["value","id"],Ne=["for","onClick"],Be={class:"flex items-center space-x-2"},ke={key:0},Ce={class:"mt-2 space-y-2"},Te={class:"w-24"},Ve=["onUpdate:modelValue"],we={class:"flex justify-end space-x-3"},Me={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700"},Pe=S({__name:"ExpenseForm",props:{editingExpense:{}},emits:["save","cancel"],setup(y,{emit:p}){const i=y,c=p,{users:l,fetchUsers:v}=j(),g=x(null),h=I(()=>new Date().toISOString().split("T")[0]),o=Q({title:"",amount:0,date:h.value,payer:"",participants:[],splitEqually:!0,individualAmounts:{}}),_=s=>{const n=o.participants.indexOf(s);n===-1?o.participants.push(s):o.participants.splice(n,1)},k=()=>{if(!o.splitEqually){const s=Object.values(o.individualAmounts).reduce((n,t)=>n+(Number(t)||0),0);if(Math.abs(s-o.amount)>.01)return!1}return!0},w=async()=>{if(!o.splitEqually&&!k()){alert("Tổng số tiền chi tiêu cá nhân phải bằng tổng số tiền");return}try{const s={title:o.title,amount:o.amount,date:o.date,payer:o.payer,participants:o.participants,split_equally:o.splitEqually,individual_amounts:o.individualAmounts},n=V();if(g.value){const{error:t}=await n.from("expenses").update(s).eq("id",g.value);if(t)throw t}else{const{error:t}=await n.from("expenses").insert([s]);if(t)throw t}c("save"),r()}catch(s){console.error("Error saving expense:",s)}},r=()=>{g.value=null,Object.assign(o,{title:"",amount:0,date:h.value,payer:"",participants:[],splitEqually:!0,individualAmounts:{}}),c("cancel")};return R(()=>i.editingExpense,s=>{s&&(g.value=s.id,Object.assign(o,{title:s.title,amount:s.amount,date:s.date||h.value,payer:s.payer,participants:s.participants,splitEqually:s.split_equally,individualAmounts:s.individual_amounts||{}}))},{immediate:!0}),A(()=>{v()}),(s,n)=>(u(),d("div",ge,[e("h2",be,m(g.value?"Sửa chi tiêu":"Thêm chi tiêu mới"),1),e("form",{onSubmit:K(w,["prevent"])},[e("div",fe,[e("div",null,[n[6]||(n[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tên chi tiêu",-1)),N(e("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>o.title=t),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},null,512),[[M,o.title]])]),e("div",null,[n[7]||(n[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Số tiền",-1)),N(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>o.amount=t),type:"number",required:"",min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},null,512),[[M,o.amount]])]),e("div",null,[n[8]||(n[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ngày chi tiêu",-1)),N(e("input",{"onUpdate:modelValue":n[2]||(n[2]=t=>o.date=t),type:"date",max:h.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},null,8,xe),[[M,o.date]])]),e("div",null,[n[10]||(n[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Người trả",-1)),N(e("select",{"onUpdate:modelValue":n[3]||(n[3]=t=>o.payer=t),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"},[n[9]||(n[9]=e("option",{value:""},"Chọn người trả",-1)),(u(!0),d(C,null,T(H(l),t=>(u(),d("option",{key:t.id,value:t.name},m(t.name),9,ye))),128))],512),[[O,o.payer]])]),e("div",null,[n[11]||(n[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Người tham gia",-1)),e("div",ve,[(u(!0),d(C,null,T(H(l),t=>(u(),d("div",{key:t.id,class:"flex items-center"},[N(e("input",{type:"checkbox",value:t.name,"onUpdate:modelValue":n[4]||(n[4]=a=>o.participants=a),id:"participant-"+t.id,class:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"},null,8,_e),[[D,o.participants]]),e("label",{for:"participant-"+t.id,class:"ml-2 text-sm text-gray-700",onClick:a=>_(t.name)},m(t.name),9,Ne)]))),128))])]),e("div",Be,[N(e("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=t=>o.splitEqually=t),id:"split-equally",class:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"},null,512),[[D,o.splitEqually]]),n[12]||(n[12]=e("label",{for:"split-equally",class:"text-sm text-gray-700"}," Chia đều cho tất cả người tham gia ",-1))]),o.splitEqually?$("",!0):(u(),d("div",ke,[n[13]||(n[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chi tiêu cá nhân",-1)),e("div",Ce,[(u(!0),d(C,null,T(o.participants,t=>(u(),d("div",{key:t,class:"flex items-center"},[e("label",Te,m(t),1),N(e("input",{type:"number","onUpdate:modelValue":a=>o.individualAmounts[t]=a,class:"ml-2 block w-32 rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",onInput:k},null,40,Ve),[[M,o.individualAmounts[t]]])]))),128))])])),e("div",we,[e("button",{type:"button",onClick:r,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Hủy "),e("button",Me,m(g.value?"Cập nhật":"Thêm"),1)])])],32)]))}}),He={class:"bg-white rounded-lg shadow p-6 mt-6"},$e={class:"overflow-x-auto mb-8"},Se={class:"min-w-full divide-y divide-gray-200"},Ae={class:"bg-white divide-y divide-gray-200"},Ee={class:"px-6 py-4"},Ue={class:"px-6 py-4"},Ie={class:"px-6 py-4"},qe={class:"px-6 py-4"},De={class:"px-6 py-4"},Ke={class:"px-6 py-4 text-right space-x-2"},Oe=["onClick"],je=["onClick"],Le={class:"space-y-6"},Qe={class:"space-y-2"},Re={class:"space-y-4"},Ge={class:"flex justify-between items-center"},Fe={class:"font-medium"},Xe={class:"font-medium"},ze={class:"ml-2"},We=["onClick"],Je={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Ye={class:"bg-white p-6 rounded-lg max-w-sm w-full"},Ze=["src"],et=S({__name:"ExpenseResults",props:{expenses:{}},emits:["edit","refresh"],setup(y){const p=y,{users:i,fetchUsers:c}=j(),l=x(!1),v=x(""),g=I(()=>{const r={};return i.value.forEach(s=>{r[s.name]=0}),p.expenses.forEach(s=>{const n=Number(s.amount);if(isNaN(n))return;const t=s.payer,a=s.participants.filter(b=>i.value.some(f=>f.name===b));if(a.length===0)return;const B=n/a.length;r.hasOwnProperty(t)&&(r[t]+=n),a.forEach(b=>{var f;if(r.hasOwnProperty(b))if(s.split_equally)r[b]-=B;else{const E=Number((f=s.individual_amounts)==null?void 0:f[b])||0;r[b]-=E}})}),r}),h=I(()=>{const r=g.value,s=[],n=Object.entries(r).filter(([,b])=>b<0).map(([b,f])=>[b,Math.round(f*100)/100]),t=Object.entries(r).filter(([,b])=>b>0).map(([b,f])=>[b,Math.round(f*100)/100]);let a=0,B=0;for(;a<n.length&&B<t.length;){const[b,f]=n[a],[E,P]=t[B],q=Math.min(Math.abs(f),P);q>0&&s.push({from:b,to:E,amount:Math.round(q*100)/100}),Math.abs(f)===P?(a++,B++):Math.abs(f)<P?(t[B][1]=Math.round((P-Math.abs(f))*100)/100,a++):(n[a][1]=Math.round((f+P)*100)/100,B++)}return s}),o=r=>{console.log(r,i);const s=i.value.find(t=>t.name==r.to);if(!s)return;const n=`https://qr.sepay.vn/img?acc=${s.account_number}&bank=${s.bank}&amount=${r.amount}&des=${encodeURIComponent(`${r.from} ck ${r.to} tien ${p.expenses.map(t=>t.title).join(" ")}`)}&template=compact&download=false`;v.value=n,l.value=!0},_=r=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r),k=r=>new Date(r).toLocaleDateString("vi-VN"),w=async r=>{if(confirm("Bạn có chắc chắn muốn xóa chi tiêu này?"))try{const{error:s}=await V().from("expenses").delete().eq("id",r);if(s)throw s;emit("refresh")}catch(s){console.error("Error deleting expense:",s)}};return A(()=>{c()}),(r,s)=>(u(),d("div",He,[s[6]||(s[6]=e("div",{class:"flex justify-between items-center mb-4"},[e("h2",{class:"text-2xl font-bold"},"Danh sách chi tiêu")],-1)),e("div",$e,[e("table",Se,[s[1]||(s[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tên chi tiêu"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Ngày"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Số tiền"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Người trả"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Người tham gia"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Thao tác")])],-1)),e("tbody",Ae,[(u(!0),d(C,null,T(r.expenses,n=>(u(),d("tr",{key:n.id},[e("td",Ee,m(n.title),1),e("td",Ue,m(k(n.date)),1),e("td",Ie,m(_(n.amount)),1),e("td",qe,m(n.payer),1),e("td",De,m(n.participants.join(", ")),1),e("td",Ke,[e("button",{onClick:t=>r.$emit("edit",n),class:"text-indigo-600 hover:text-indigo-900"}," Sửa ",8,Oe),e("button",{onClick:t=>w(n.id),class:"text-red-600 hover:text-red-900"}," Xóa ",8,je)])]))),128))])])]),s[7]||(s[7]=e("h2",{class:"text-2xl font-bold mb-4"},"Kết quả chia tiền",-1)),e("div",Le,[e("div",null,[s[2]||(s[2]=e("h3",{class:"text-lg font-semibold mb-2"},"Tổng kết cá nhân",-1)),e("div",Qe,[(u(!0),d(C,null,T(g.value,(n,t)=>(u(),d("div",{key:t,class:"flex justify-between"},[e("span",null,m(t),1),e("span",{class:G(n<0?"text-red-500":"text-green-500")},m(_(n)),3)]))),128))])]),e("div",null,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold mb-2"},"Giao dịch cần thực hiện",-1)),e("div",Re,[(u(!0),d(C,null,T(h.value,(n,t)=>(u(),d("div",{key:t,class:"border p-4 rounded-lg"},[e("div",Ge,[e("div",null,[e("span",Fe,m(n.from),1),s[3]||(s[3]=e("span",{class:"mx-2"},"→",-1)),e("span",Xe,m(n.to),1),e("span",ze,m(_(n.amount)),1)]),e("button",{onClick:a=>o(n),class:"text-green-500 hover:text-green-600"}," Tạo QR chuyển tiền ",8,We)])]))),128))])])]),l.value?(u(),d("div",Je,[e("div",Ye,[s[5]||(s[5]=e("h3",{class:"text-lg font-bold mb-4"},"QR Code chuyển khoản",-1)),e("img",{src:v.value,alt:"QR Code",class:"w-full"},null,8,Ze),e("button",{onClick:s[0]||(s[0]=n=>l.value=!1),class:"mt-4 w-full bg-green-500 text-white py-2 rounded-lg"}," Đóng ")])])):$("",!0)]))}}),tt={class:"min-h-screen bg-green-50"},nt={class:"container mx-auto px-4 py-8"},ot=S({__name:"index",setup(y){const p=x([]),i=x(null),c=async()=>{const{data:g,error:h}=await V().from("expenses").select("*").order("date",{ascending:!1});if(h){console.error("Error loading expenses:",h);return}p.value=g},l=g=>{i.value=g},v=()=>{c(),i.value=null};return A(()=>{c()}),(g,h)=>{const o=he,_=Pe,k=et;return u(),d("div",tt,[e("div",nt,[h[1]||(h[1]=e("h1",{class:"text-4xl font-bold text-center text-green-800 mb-8"},"EzSplit",-1)),U(o),U(_,{"editing-expense":i.value,onSave:v,onCancel:h[0]||(h[0]=w=>i.value=null)},null,8,["editing-expense"]),U(k,{expenses:p.value,onEdit:l,onRefresh:c},null,8,["expenses"]),h[2]||(h[2]=e("footer",{class:"text-center mt-8 text-sm text-gray-600"},[e("p",null,"Made with ♥️ by abner"),e("p",null,"© 2025 EzSplit. All rights reserved.")],-1))])])}}});export{ot as default};
